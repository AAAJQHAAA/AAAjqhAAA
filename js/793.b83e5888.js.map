{"version":3,"file":"js/793.b83e5888.js","mappings":"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","sources":["webpack://jqh-code/./src/views/panorama/pannellum/Viewer.vue","webpack://jqh-code/./src/views/panorama/pannellum/PanoramaRenderer.js","webpack://jqh-code/src/views/panorama/pannellum/Viewer.vue","webpack://jqh-code/./src/views/panorama/pannellum/Viewer.vue?51fc","webpack://jqh-code/./src/views/panorama/pannellum/Viewer.vue?b384"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"home\"},[_c('div',{ref:\"container\",staticClass:\"pnlm-container\",attrs:{\"id\":\"container\"}},[_c('div',{ref:\"uiControls\",staticClass:\"pnlm-ui\"},[_c('div',{ref:\"dragControl\",staticClass:\"pnlm-dragfix\"}),_vm._l((_vm.getHotSpots),function(item){return _c('div',{ref:item.id,refInFor:true,staticClass:\"hotspot-base\",on:{\"mousedown\":function($event){return _vm.hotspotDown($event, item)},\"mouseup\":function($event){return _vm.hotspotUp($event, item)},\"mousemove\":function($event){return _vm.hotspotMove($event, item)}}},[_c('div',{staticClass:\"tooltip-container\"},[_c('div',{staticClass:\"tooltip\"},[_c('img',{attrs:{\"src\":require(\"./img/position.png\")}}),_c('div',{staticClass:\"tooltip-text\"},[_vm._v(_vm._s(item.text))])])])])}),_c('div',{ref:\"compass\",staticClass:\"pnlm-compass\"})],2)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","let v = [\r\n    'attribute vec2 a_texCoord;',\r\n    'varying vec2 v_texCoord;',\r\n    'void main() {',\r\n    'gl_Position = vec4(a_texCoord, 0.0, 1.0);',\r\n    'v_texCoord = a_texCoord;',\r\n    '}'\r\n].join('');\r\nlet fragEquiCubeBase = [\r\n    'precision highp float;',\r\n    'uniform float u_aspectRatio;',\r\n    'uniform float u_psi;',\r\n    'uniform float u_theta;',\r\n    'uniform float u_f;',\r\n    'uniform float u_h;',\r\n    'uniform float u_v;',\r\n    'uniform float u_vo;',\r\n    'uniform float u_rot;',\r\n    'const float PI = 3.14159265358979323846264;',\r\n    'uniform sampler2D u_image0;',\r\n    'uniform sampler2D u_image1;',\r\n    'uniform bool u_splitImage;',\r\n    'uniform samplerCube u_imageCube;',\r\n    'varying vec2 v_texCoord;',\r\n    'uniform vec4 u_backgroundColor;',\r\n    'void main() {',\r\n    'float x = v_texCoord.x * u_aspectRatio;',\r\n    'float y = v_texCoord.y;',\r\n    'float sinrot = sin(u_rot);',\r\n    'float cosrot = cos(u_rot);',\r\n    'float rot_x = x * cosrot - y * sinrot;',\r\n    'float rot_y = x * sinrot + y * cosrot;',\r\n    'float sintheta = sin(u_theta);',\r\n    'float costheta = cos(u_theta);',\r\n    'float a = u_f * costheta - rot_y * sintheta;',\r\n    'float root = sqrt(rot_x * rot_x + a * a);',\r\n    'float lambda = atan(rot_x / root, a / root) + u_psi;',\r\n    'float phi = atan((rot_y * costheta + u_f * sintheta) / root);',\r\n].join('\\n');\r\nlet fragCube = fragEquiCubeBase + [\r\n    'float cosphi = cos(phi);',\r\n    'gl_FragColor = textureCube(u_imageCube, vec3(cosphi*sin(lambda), sin(phi), cosphi*cos(lambda)));',\r\n    '}'\r\n].join('\\n');\r\nlet fragEquirectangular = fragEquiCubeBase + [\r\n    'lambda = mod(lambda + PI, PI * 2.0) - PI;',\r\n    'vec2 coord = vec2(lambda / PI, phi / (PI / 2.0));',\r\n    'if(coord.x < -u_h || coord.x > u_h || coord.y < -u_v + u_vo || coord.y > u_v + u_vo)',\r\n    'gl_FragColor = u_backgroundColor;',\r\n    'else {',\r\n    'if(u_splitImage) {',\r\n    'if(coord.x < 0.0)',\r\n    'gl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / u_h, (-coord.y + u_v + u_vo) / (u_v * 2.0)));',\r\n    'else',\r\n    'gl_FragColor = texture2D(u_image1, vec2((coord.x + u_h) / u_h - 1.0, (-coord.y + u_v + u_vo) / (u_v * 2.0)));',\r\n    '} else {',\r\n    'gl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / (u_h * 2.0), (-coord.y + u_v + u_vo) / (u_v * 2.0)));',\r\n    '}',\r\n    '}',\r\n    '}'\r\n].join('\\n');\r\n/**\r\n * 创建渲染器renderer.\r\n * @param {HTMLElement} container - 渲染容器DOM元素\r\n */\r\nexport default function PanoramaRenderer(container) {\r\n    let canvas;\r\n    if (container) {\r\n        canvas = document.createElement('canvas');\r\n        canvas.style.width = canvas.style.height = '100%';\r\n        container.appendChild(canvas);\r\n    }\r\n    let program, gl, vs, fs;\r\n    let previewProgram, previewVs, previewFs;\r\n    let vtmps;\r\n    let pose;\r\n    let image, imageType;\r\n    let texCoordBuffer, cubeVertBuf, cubeVertTexCoordBuf, cubeVertIndBuf;\r\n    let globalParams;\r\n    /**\r\n     * 初始化renderer.\r\n     * @memberof PanoramaRenderer\r\n     * @instance\r\n     * @param {Image|Array|Object} image - 输入图片; 格式根据`imageType`判断.\r\n     `equirectangular`：一张图片；\r\n     `cubemap`：按顺序排列的立方体面的图像数组[+z, +x, -z, -x, +y, -y]；\r\n     * @param {string} imageType - 图片的类型: `equirectangular`, `cubemap`\r\n     * @param {function} callback - 加载回调函数.\r\n     * @param {Object} [params] - 其他配置参数(`horizonPitchRadian`图像地平线的俯仰弧度, `horizonRollRadian`图像地平线的俯仰弧度, `backgroundColor`).\r\n     */\r\n    this.init = function (_image, _imageType, callback, params) {\r\n        // haov - 初始水平视角弧度（弧度 = 角度 ×（PI/180））默认360\r\n        // vaov - 初始垂直视角弧度（弧度 = 角度 ×（PI/180））默认180\r\n        // voffset - 初始垂直偏移角弧度（弧度 = 角度 ×（PI/180））默认0\r\n        let haov = 360* Math.PI / 180, vaov = 180* Math.PI / 180, voffset = 0 * Math.PI / 180;\r\n        if (_imageType === undefined) {\r\n            _imageType = 'equirectangular';\r\n        }\r\n        if (_imageType != 'equirectangular' && _imageType != 'cubemap') {\r\n            throw {type: '配置错误！'};\r\n        }\r\n        imageType = _imageType;\r\n        image = _image;\r\n        globalParams = params || {};\r\n        if (program) {\r\n            if (vs) {\r\n                gl.detachShader(program, vs);\r\n                gl.deleteShader(vs);\r\n            }\r\n            if (fs) {\r\n                gl.detachShader(program, fs);\r\n                gl.deleteShader(fs);\r\n            }\r\n            gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\r\n            if (program.texture)\r\n                gl.deleteTexture(program.texture);\r\n            gl.deleteProgram(program);\r\n            program = undefined;\r\n        }\r\n        if (previewProgram) {\r\n            if (previewVs) {\r\n                gl.detachShader(previewProgram, previewVs);\r\n                gl.deleteShader(previewVs);\r\n            }\r\n            if (previewFs) {\r\n                gl.detachShader(previewProgram, previewFs);\r\n                gl.deleteShader(previewFs);\r\n            }\r\n            gl.deleteProgram(previewProgram);\r\n            previewProgram = undefined;\r\n        }\r\n        pose = undefined;\r\n\r\n        let s;\r\n        let faceMissing = false;\r\n        let cubeImgWidth;\r\n        if (imageType == 'cubemap') {\r\n            for (s = 0; s < 6; s++) {\r\n                if (image[s].width > 0) {\r\n                    if (cubeImgWidth === undefined){\r\n                        cubeImgWidth = image[s].width;\r\n                    }\r\n                    if (cubeImgWidth != image[s].width){\r\n                        console.log('立方体面具有不一致的宽度: ' + cubeImgWidth + ' vs. ' + image[s].width);\r\n                    }\r\n                } else{\r\n                    faceMissing = true;\r\n                }\r\n            }\r\n        }\r\n\r\n        function fillMissingFaces(imgSize) {\r\n            if (faceMissing) {\r\n                let nbytes = imgSize * imgSize * 4;\r\n                let imageArray = new Uint8ClampedArray(nbytes);\r\n                let rgb = params&&params.backgroundColor ? params.backgroundColor : [0, 0, 0];\r\n                rgb[0] *= 255;\r\n                rgb[1] *= 255;\r\n                rgb[2] *= 255;\r\n                for (let i = 0; i < nbytes; i++) {\r\n                    imageArray[i++] = rgb[0];\r\n                    imageArray[i++] = rgb[1];\r\n                    imageArray[i++] = rgb[2];\r\n                }\r\n                let backgroundSquare = new ImageData(imageArray, imgSize, imgSize);\r\n                for (s = 0; s < 6; s++) {\r\n                    if (image[s].width == 0)\r\n                        image[s] = backgroundSquare;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (!(imageType == 'cubemap' && (cubeImgWidth & (cubeImgWidth - 1)) !== 0 && (navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/) || navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 9_/) || navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 10_/) || navigator.userAgent.match(/Trident.*rv[ :]*11\\./)))) {\r\n            if (!gl){\r\n                gl = canvas.getContext('experimental-webgl', {alpha: false, depth: false});\r\n            }\r\n            if (gl && gl.getError() == 1286){\r\n                handleWebGLError1286();\r\n            }\r\n        }\r\n        if (!gl) {\r\n            throw {type: 'no WebGL support detected!'};\r\n        }\r\n        if (imageType == 'cubemap'){\r\n            fillMissingFaces(cubeImgWidth);\r\n        }\r\n        if (image.basePath) {\r\n            image.fullpath = image.basePath + image.path;\r\n        } else {\r\n            image.fullpath = image.path;\r\n        }\r\n        image.invTileResolution = 1 / image.tileResolution;\r\n        let vertices = createCube();\r\n        vtmps = [];\r\n        for (s = 0; s < 6; s++) {\r\n            vtmps[s] = vertices.slice(s * 12, s * 12 + 12);\r\n            vertices = createCube();\r\n        }\r\n        let maxWidth = 0;\r\n        if (imageType == 'equirectangular') {\r\n            maxWidth = gl.getParameter(gl.MAX_TEXTURE_SIZE);\r\n            if (Math.max(image.width / 2, image.height) > maxWidth) {\r\n                throw {type: `图片太大${image.width}px 宽, 设备最大支持${maxWidth * 2}px.`, width: image.width, maxWidth: maxWidth * 2};\r\n            }\r\n        } else if (imageType == 'cubemap') {\r\n            if (cubeImgWidth > gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE)) {\r\n                throw {type: `图片太大${cubeImgWidth}px 宽, 设备最大支持${maxWidth * 2}px.`, width: cubeImgWidth, maxWidth: maxWidth};\r\n            }\r\n        }\r\n        if (params) {\r\n            let horizonPitchRadian = isNaN(params.horizonPitchRadian) ? 0 : Number(params.horizonPitchRadian), horizonRollRadian = isNaN(params.horizonRollRadian) ? 0 : Number(params.horizonRollRadian);\r\n            if (horizonPitchRadian != 0 || horizonRollRadian != 0){\r\n                pose = [horizonPitchRadian, horizonRollRadian];\r\n            }\r\n        }\r\n        let glBindType = gl.TEXTURE_2D;\r\n        gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\r\n        if (gl.getShaderPrecisionFormat) {\r\n            let precision = gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT);\r\n            if (precision && precision.precision < 1) {\r\n                fragEquiCubeBase = fragEquiCubeBase.replace('highp', 'mediump');\r\n            }\r\n        }\r\n        vs = gl.createShader(gl.VERTEX_SHADER);\r\n        let vertexSrc = v;\r\n        gl.shaderSource(vs, vertexSrc);\r\n        gl.compileShader(vs);\r\n        fs = gl.createShader(gl.FRAGMENT_SHADER);\r\n        let fragmentSrc = fragEquirectangular;\r\n        if (imageType == 'cubemap') {\r\n            glBindType = gl.TEXTURE_CUBE_MAP;\r\n            fragmentSrc = fragCube;\r\n        }\r\n        gl.shaderSource(fs, fragmentSrc);\r\n        gl.compileShader(fs);\r\n        program = gl.createProgram();\r\n        gl.attachShader(program, vs);\r\n        gl.attachShader(program, fs);\r\n        gl.linkProgram(program);\r\n        if (!gl.getShaderParameter(vs, gl.COMPILE_STATUS)){\r\n            console.log(gl.getShaderInfoLog(vs));\r\n        }\r\n        if (!gl.getShaderParameter(fs, gl.COMPILE_STATUS)){\r\n            console.log(gl.getShaderInfoLog(fs));\r\n        }\r\n        if (!gl.getProgramParameter(program, gl.LINK_STATUS)){\r\n            console.log(gl.getProgramInfoLog(program));\r\n        }\r\n        gl.useProgram(program);\r\n        program.drawInProgress = false;\r\n        let color = params&&params.backgroundColor ? params.backgroundColor : [0, 0, 0];\r\n        gl.clearColor(color[0], color[1], color[2], 1.0);\r\n        gl.clear(gl.COLOR_BUFFER_BIT);\r\n        program.texCoordLocation = gl.getAttribLocation(program, 'a_texCoord');\r\n        gl.enableVertexAttribArray(program.texCoordLocation);\r\n        if (!texCoordBuffer){\r\n            texCoordBuffer = gl.createBuffer();\r\n        }\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, texCoordBuffer);\r\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1, 1, 1, 1, 1, -1, -1, 1, 1, -1, -1, -1]), gl.STATIC_DRAW);\r\n        gl.vertexAttribPointer(program.texCoordLocation, 2, gl.FLOAT, false, 0, 0);\r\n        program.aspectRatio = gl.getUniformLocation(program, 'u_aspectRatio');\r\n        gl.uniform1f(program.aspectRatio, gl.drawingBufferWidth / gl.drawingBufferHeight);\r\n        program.psi = gl.getUniformLocation(program, 'u_psi');\r\n        program.theta = gl.getUniformLocation(program, 'u_theta');\r\n        program.f = gl.getUniformLocation(program, 'u_f');\r\n        program.h = gl.getUniformLocation(program, 'u_h');\r\n        program.v = gl.getUniformLocation(program, 'u_v');\r\n        program.vo = gl.getUniformLocation(program, 'u_vo');\r\n        program.rot = gl.getUniformLocation(program, 'u_rot');\r\n        gl.uniform1f(program.h, haov / (Math.PI * 2.0));\r\n        gl.uniform1f(program.v, vaov / Math.PI);\r\n        gl.uniform1f(program.vo, voffset / Math.PI * 2);\r\n        if (imageType == 'equirectangular') {\r\n            program.backgroundColor = gl.getUniformLocation(program, 'u_backgroundColor');\r\n            gl.uniform4fv(program.backgroundColor, color.concat([1]));\r\n        }\r\n        program.texture = gl.createTexture();\r\n        gl.bindTexture(glBindType, program.texture);\r\n        if (imageType == 'cubemap') {\r\n            gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X, 0, gl.RGB, gl.RGB, gl.UNSIGNED_BYTE, image[1]);\r\n            gl.texImage2D(gl.TEXTURE_CUBE_MAP_NEGATIVE_X, 0, gl.RGB, gl.RGB, gl.UNSIGNED_BYTE, image[3]);\r\n            gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_Y, 0, gl.RGB, gl.RGB, gl.UNSIGNED_BYTE, image[4]);\r\n            gl.texImage2D(gl.TEXTURE_CUBE_MAP_NEGATIVE_Y, 0, gl.RGB, gl.RGB, gl.UNSIGNED_BYTE, image[5]);\r\n            gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_Z, 0, gl.RGB, gl.RGB, gl.UNSIGNED_BYTE, image[0]);\r\n            gl.texImage2D(gl.TEXTURE_CUBE_MAP_NEGATIVE_Z, 0, gl.RGB, gl.RGB, gl.UNSIGNED_BYTE, image[2]);\r\n        } else {\r\n            if (image.width <= maxWidth) {\r\n                gl.uniform1i(gl.getUniformLocation(program, 'u_splitImage'), 0);\r\n                gl.texImage2D(glBindType, 0, gl.RGB, gl.RGB, gl.UNSIGNED_BYTE, image);\r\n            } else {\r\n                gl.uniform1i(gl.getUniformLocation(program, 'u_splitImage'), 1);\r\n                let cropCanvas = document.createElement('canvas');\r\n                cropCanvas.width = image.width / 2;\r\n                cropCanvas.height = image.height;\r\n                let cropContext = cropCanvas.getContext('2d');\r\n                cropContext.drawImage(image, 0, 0);\r\n                let cropImage = cropContext.getImageData(0, 0, image.width / 2, image.height);\r\n                gl.texImage2D(glBindType, 0, gl.RGB, gl.RGB, gl.UNSIGNED_BYTE, cropImage);\r\n                program.texture2 = gl.createTexture();\r\n                gl.activeTexture(gl.TEXTURE1);\r\n                gl.bindTexture(glBindType, program.texture2);\r\n                gl.uniform1i(gl.getUniformLocation(program, 'u_image1'), 1);\r\n                cropContext.drawImage(image, -image.width / 2, 0);\r\n                cropImage = cropContext.getImageData(0, 0, image.width / 2, image.height);\r\n                gl.texImage2D(glBindType, 0, gl.RGB, gl.RGB, gl.UNSIGNED_BYTE, cropImage);\r\n                gl.texParameteri(glBindType, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n                gl.texParameteri(glBindType, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n                gl.texParameteri(glBindType, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n                gl.texParameteri(glBindType, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n                gl.activeTexture(gl.TEXTURE0);\r\n            }\r\n        }\r\n        if (imageType != \"cubemap\" && image.width && image.width <= maxWidth && haov == 2 * Math.PI && (image.width & (image.width - 1)) == 0){\r\n            gl.texParameteri(glBindType, gl.TEXTURE_WRAP_S, gl.REPEAT);\r\n        }else{\r\n            gl.texParameteri(glBindType, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n        }\r\n        gl.texParameteri(glBindType, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n        gl.texParameteri(glBindType, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n        gl.texParameteri(glBindType, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n        let err = gl.getError();\r\n        if (err !== 0) {\r\n            throw {type: 'Something went wrong with WebGL!'};\r\n        }\r\n        callback();\r\n    };\r\n\r\n    /**\r\n     * 销毁renderer.\r\n     * @memberof PanoramaRenderer\r\n     * @instance\r\n     */\r\n    this.destroy = function () {\r\n        if (container !== undefined) {\r\n            if (canvas !== undefined && container.contains(canvas)) {\r\n                container.removeChild(canvas);\r\n            }\r\n        }\r\n        if (gl) {\r\n            let extension = gl.getExtension('WEBGL_lose_context');\r\n            if (extension)\r\n                extension.loseContext();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 重置大小\r\n     * @memberof PanoramaRenderer\r\n     * @instance\r\n     */\r\n    this.resize = function () {\r\n        let pixelRatio = window.devicePixelRatio || 1;\r\n        canvas.width = canvas.clientWidth * pixelRatio;\r\n        canvas.height = canvas.clientHeight * pixelRatio;\r\n        if (gl) {\r\n            if (gl.getError() == 1286)\r\n                handleWebGLError1286();\r\n            gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\r\n            if (image.shtHash) {\r\n                gl.useProgram(previewProgram);\r\n                gl.uniform1f(previewProgram.aspectRatio, canvas.clientWidth / canvas.clientHeight);\r\n                gl.useProgram(program);\r\n            } else {\r\n                gl.uniform1f(program.aspectRatio, canvas.clientWidth / canvas.clientHeight);\r\n            }\r\n        }\r\n    };\r\n    if (canvas) {\r\n        this.resize();\r\n    }\r\n\r\n    /**\r\n     * 设置渲染水平俯仰和滚动弧度。\r\n     * @memberof PanoramaRenderer\r\n     * @instance\r\n     * @param {number} horizonPitchRadian - 俯仰弧度（弧度 = 角度 ×（PI/180））\r\n     * @param {number} horizonRollRadian - 旋转弧度（弧度 = 角度 ×（PI/180））\r\n     */\r\n    this.setPose = function (horizonPitchRadian, horizonRollRadian) {\r\n        horizonPitchRadian = isNaN(horizonPitchRadian) ? 0 : Number(horizonPitchRadian);\r\n        horizonRollRadian = isNaN(horizonRollRadian) ? 0 : Number(horizonRollRadian);\r\n        if (horizonPitchRadian == 0 && horizonRollRadian == 0) {\r\n            pose = undefined;\r\n        } else {\r\n            pose = [horizonPitchRadian, horizonRollRadian];\r\n        }\r\n    };\r\n    /**\r\n     * 获取【俯仰弧度，旋转弧度】\r\n     * @returns {number[]|*}\r\n     */\r\n    this.getPose = function(){\r\n        if(pose){\r\n            return pose;\r\n        }\r\n        return [0,0];\r\n    }\r\n    /**\r\n     * 渲染新图.\r\n     * @memberof PanoramaRenderer\r\n     * @instance\r\n     * @param {number} pitch - 俯仰弧度（弧度 = 角度 ×（PI/180））。\r\n     * @param {number} yaw - 偏航弧度（弧度 = 角度 ×（PI/180））。\r\n     * @param {number} hfov - 水平视场弧度（弧度 = 角度 ×（PI/180））。\r\n     * @param {Object} [params] - 额外的配置参数。\r\n     * @param {number} [params.roll] - 相机转动弧度（弧度 = 角度 ×（PI/180））。\r\n     * @param {string} [params.returnImage] - 返回渲染图像?如果指定，应该是'ImageBitmap'， 'image/jpeg'或'image/png'。\r\n     * @param {function} [params.hook] - 钩子，用于在此环境中执行任意函数。\r\n     */\r\n    this.render = function (pitch, yaw, hfov, params) {\r\n        let focal, roll = 0;\r\n        if (!params){\r\n            params = {};\r\n        }\r\n        if (params.roll){\r\n            roll = params.roll;\r\n        }\r\n\r\n        if (pose !== undefined) {\r\n            let horizonPitchRadian = pose[0], horizonRollRadian = pose[1];\r\n            // Calculate new pitch and yaw\r\n            let orig_pitch = pitch, orig_yaw = yaw,\r\n                x = Math.cos(horizonRollRadian) * Math.sin(pitch) * Math.sin(horizonPitchRadian) +\r\n                    Math.cos(pitch) * (Math.cos(horizonPitchRadian) * Math.cos(yaw) +\r\n                    Math.sin(horizonRollRadian) * Math.sin(horizonPitchRadian) * Math.sin(yaw)),\r\n                y = -Math.sin(pitch) * Math.sin(horizonRollRadian) +\r\n                    Math.cos(pitch) * Math.cos(horizonRollRadian) * Math.sin(yaw),\r\n                z = Math.cos(horizonRollRadian) * Math.cos(horizonPitchRadian) * Math.sin(pitch) +\r\n                    Math.cos(pitch) * (-Math.cos(yaw) * Math.sin(horizonPitchRadian) +\r\n                    Math.cos(horizonPitchRadian) * Math.sin(horizonRollRadian) * Math.sin(yaw));\r\n            pitch = Math.asin(Math.max(Math.min(z, 1), -1));\r\n            yaw = Math.atan2(y, x);\r\n\r\n            // Calculate roll\r\n            let v = [Math.cos(orig_pitch) * (Math.sin(horizonRollRadian) * Math.sin(horizonPitchRadian) * Math.cos(orig_yaw) -\r\n                    Math.cos(horizonPitchRadian) * Math.sin(orig_yaw)),\r\n                    Math.cos(orig_pitch) * Math.cos(horizonRollRadian) * Math.cos(orig_yaw),\r\n                    Math.cos(orig_pitch) * (Math.cos(horizonPitchRadian) * Math.sin(horizonRollRadian) * Math.cos(orig_yaw) +\r\n                    Math.sin(orig_yaw) * Math.sin(horizonPitchRadian))],\r\n                w = [-Math.cos(pitch) * Math.sin(yaw), Math.cos(pitch) * Math.cos(yaw)];\r\n            let roll_adj = Math.acos(Math.max(Math.min((v[0] * w[0] + v[1] * w[1]) / (Math.sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2]) * Math.sqrt(w[0] * w[0] + w[1] * w[1])), 1), -1));\r\n            if (v[2] < 0)\r\n                roll_adj = 2 * Math.PI - roll_adj;\r\n            roll += roll_adj;\r\n        }\r\n        if (params.hook) {\r\n            params.hook({\r\n                gl: gl,\r\n                program: program,\r\n                previewProgram: previewProgram,\r\n                imageType: imageType,\r\n                texCoordBuffer: texCoordBuffer,\r\n                cubeVertBuf: cubeVertBuf,\r\n                cubeVertTexCoordBuf: cubeVertTexCoordBuf,\r\n                cubeVertIndBuf: cubeVertIndBuf\r\n            });\r\n        }\r\n\r\n        // Calculate focal length from vertical field of view\r\n        let vfov = 2 * Math.atan(Math.tan(hfov * 0.5) / (gl.drawingBufferWidth / gl.drawingBufferHeight));\r\n        focal = 1 / Math.tan(vfov * 0.5);\r\n\r\n        // Pass psi, theta, roll, and focal length\r\n        gl.uniform1f(program.psi, yaw);\r\n        gl.uniform1f(program.theta, pitch);\r\n        gl.uniform1f(program.rot, roll);\r\n        gl.uniform1f(program.f, focal);\r\n\r\n        // Draw using current buffer\r\n        gl.drawArrays(gl.TRIANGLES, 0, 6);\r\n        if (params.returnImage !== undefined) {\r\n            if (window.createImageBitmap && params.returnImage == 'ImageBitmap') {\r\n                return createImageBitmap(canvas);\r\n            } else {\r\n                if (params.returnImage.toString().indexOf('image/') == 0)\r\n                    return canvas.toDataURL(params.returnImage);\r\n                else\r\n                    return canvas.toDataURL('image/png'); // Old default\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * 返回canvas\r\n     * @memberof PanoramaRenderer\r\n     * @instance\r\n     * @returns {HTMLElement} PanoramaRenderer's canvas.\r\n     */\r\n    this.getCanvas = function () {\r\n        return canvas;\r\n    };\r\n\r\n    /**\r\n     * 创建立方体顶点数组。\r\n     * @private\r\n     * @returns {Float32Array} Cube vertex array.\r\n     */\r\n    function createCube() {\r\n        return new Float32Array([\r\n            -1, 1, -1, 1, 1, -1, 1, -1, -1, -1, -1, -1, // Front face\r\n            1, 1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1, // Back face\r\n            -1, 1, 1, 1, 1, 1, 1, 1, -1, -1, 1, -1, // Up face\r\n            -1, -1, -1, 1, -1, -1, 1, -1, 1, -1, -1, 1, // Down face\r\n            -1, 1, 1, -1, 1, -1, -1, -1, -1, -1, -1, 1, // Left face\r\n            1, 1, -1, 1, 1, 1, 1, -1, 1, 1, -1, -1  // Right face\r\n        ]);\r\n    }\r\n\r\n    /**\r\n     * 在iOS (iPhone 5c, iOS 10.3)上，当画布太大时，会发生此WebGL错误。\r\n     * 不幸的是，没有办法事先测试这一点，所以我们减少画布的大小，如果这个错误被抛出。\r\n     * @private\r\n     */\r\n    function handleWebGLError1286() {\r\n        console.log('由于错误1286，正在减少画布大小!');\r\n        canvas.width = Math.round(canvas.width / 2);\r\n        canvas.height = Math.round(canvas.height / 2);\r\n    }\r\n\r\n}\r\n","<template>\r\n<div class=\"home\">\r\n  <!--全景图视图区域，全屏操作-->\r\n  <div ref=\"container\" id=\"container\" class=\"pnlm-container\">\r\n    <!--操作区域，位于最上层-->\r\n    <div ref=\"uiControls\" class=\"pnlm-ui\">\r\n      <div ref=\"dragControl\" class=\"pnlm-dragfix\"></div>\r\n      <!--hotSpots区域-->\r\n      <div :ref=\"item.id\" class=\"hotspot-base\" @mousedown=\"hotspotDown($event, item)\" @mouseup=\"hotspotUp($event, item)\" @mousemove=\"hotspotMove($event, item)\" v-for=\"item in getHotSpots\">\r\n        <div class=\"tooltip-container\">\r\n          <div class=\"tooltip\">\r\n            <img src=\"./img/position.png\"/>\r\n            <div class=\"tooltip-text\">{{item.text}}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- 指南针     -->\r\n      <div ref=\"compass\" class=\"pnlm-compass\"></div>\r\n    </div>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport PanoramaRenderer from './PanoramaRenderer.js'\r\nexport default {\r\n  name: \"Viewer\",\r\n  props: {\r\n    autoRotate: {\r\n      type: Boolean,\r\n      required: true\r\n    },\r\n    hotSpots: {\r\n      type: Array,\r\n      default: function () {\r\n        return []\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    getHotSpots: function() {\r\n      return this.hotSpots;\r\n    }\r\n  },\r\n  watch: {\r\n    autoRotate:{\r\n      immediate: true,\r\n      handler:function(newVal, oldVal) {\r\n        this.config.autoRotate = newVal;\r\n        this.animate();\r\n      }\r\n    },\r\n    getHotSpots(newVal, oldVal){\r\n      console.log(newVal);\r\n      this.$nextTick(()=>{\r\n        this.renderHotSpots();\r\n      })\r\n    }\r\n  },\r\n  data(){\r\n    return {\r\n      panoImage: null,// 全景图\r\n      renderer: null,// 渲染器\r\n      animating: false,// 渲染中\r\n      defaultConfig:{\r\n        minHfov: 50,// （默认）最小水平视野\r\n        maxHfov: 120,// （默认）最大水平视野\r\n        imageType: 'equirectangular', // （初始化）图片的类型: `equirectangular`, `cubemap`\r\n        origPitch: 0,// （渲染）垂直俯仰角度（以度为单位）,默认0，范围[-90,90]\r\n        origYaw: 0,// （渲染）水平转动角度（以度为单位）,默认0\r\n        origHfov: 100,// （渲染）全景图的起始水平视野（以度为单位）,默认100,[50-120]\r\n        autoRotate: false,// （渲染）自动旋转\r\n      },// 初始配置\r\n      config: {\r\n        pitch: 0,// （渲染）俯仰角描述了摄像机的垂直旋转角度（以度为单位）,默认0，范围[-90,90]\r\n        yaw: 0,// （渲染）偏航角描述了摄像机的水平旋转角度（以度为单位）,默认0，范围[-360, 360]\r\n        hfov: 100,// （渲染）水平视场角描述了摄像机在水平方向上能够捕捉到的视野范围（以度为单位）,默认100,[50-120]\r\n        autoRotate: false,// 自动旋转\r\n      },// 全景图当前配置（摄像机的参数）\r\n      pointer: {\r\n        isUserDown: false,// 是否用户点下\r\n        onPointerDownPointerX: 0,// 鼠标点击x\r\n        onPointerDownPointerY: 0,// 鼠标点击y\r\n        onPointerDownYaw: 0,// 鼠标点击时yaw\r\n        onPointerDownPitch: 0,// 鼠标点击时pitch\r\n        onPointerDownPointerDist: -1,// 双指扩散距离（移动端双指缩放）\r\n      },// 手指触发转动中间变量\r\n      resizeObserver: null,// 窗口大小改变事件\r\n      moveHotspotId: null,// 移动热点\r\n    }\r\n  },\r\n  methods:{\r\n    // 加载图片\r\n    loadImage(imgUrl){\r\n      let _this = this;\r\n      // 加载图片\r\n      const panoImage = new Image();\r\n      panoImage.crossOrigin = ''\r\n      panoImage.crossOrigin = 'anonymous';\r\n      panoImage.onload = function() {\r\n        _this.init();\r\n      }\r\n      panoImage.onerror = function() {\r\n        console.log('panoImage加载失败！');\r\n      }\r\n      panoImage.src = imgUrl?imgUrl:'building.jpg';\r\n      this.panoImage = panoImage;\r\n    },\r\n    // 初始化（初始化参数）\r\n    init(){\r\n      let _this = this;\r\n      let renderer;\r\n      if(!_this.renderer){\r\n        renderer = new PanoramaRenderer(document.getElementById('container'));\r\n      } else {\r\n        renderer = _this.renderer\r\n      }\r\n      renderer.init(this.panoImage, this.defaultConfig.imageType, ()=>{\r\n        _this.renderer = renderer;\r\n        _this.animate();\r\n      }, null);\r\n    },\r\n    // 渲染（避免重复）\r\n    animate(){\r\n      if(!this.animating&&this.renderer){\r\n        this.animating = true;\r\n        this.render();\r\n      }\r\n    },\r\n    // 渲染（取config的参数渲染）\r\n    render() {\r\n      if (this.renderer) {\r\n        let { pitch, yaw, hfov } = this.config;\r\n        // 纠正yaw在[-360, 360]之间\r\n        if (yaw > 360) {\r\n          yaw -= 360;\r\n        } else if (yaw < -360) {\r\n          yaw += 360;\r\n        }\r\n        this.config.yaw = yaw;\r\n        this.renderer.render(pitch * Math.PI / 180, yaw * Math.PI / 180, hfov * Math.PI / 180, null);\r\n        if(this.pointer.isUserDown){\r\n          // 用户操作，一直渲染\r\n          requestAnimationFrame(this.render);\r\n        } else if(this.config.autoRotate){\r\n          this.config.yaw += 0.1;// 更新旋转角度\r\n          requestAnimationFrame(this.render);\r\n        } else {\r\n          // 停止渲染\r\n          this.animating = false;\r\n        }\r\n        this.renderHotSpots();\r\n        const compass = this.$refs.compass;\r\n        if(!compass){\r\n          return;\r\n        }\r\n        compass.style.transform = 'rotate(' + (-yaw - 0) + 'deg)';\r\n        compass.style.webkitTransform = 'rotate(' + (-yaw - 0) + 'deg)';\r\n      }\r\n    },\r\n    renderHotSpots() {\r\n      this.hotSpots.forEach(this.renderHotSpot);\r\n    },\r\n    // 渲染热点，计算点位\r\n    renderHotSpot(hs) {\r\n      const {id, pitch:HsPitch, yaw:HsYaw} = hs;\r\n      const hsDiv = this.$refs[id][0];\r\n      if(!hsDiv){\r\n        return;\r\n      }\r\n      let { pitch, yaw, hfov } = this.config;\r\n      let hsPitchSin = Math.sin(HsPitch * Math.PI / 180),// 热点垂直角度sin值（sin=对边/斜边）\r\n          hsPitchCos = Math.cos(HsPitch * Math.PI / 180),// 热点垂直角度cos值（cos=领边/斜边）\r\n          configPitchSin = Math.sin(pitch * Math.PI / 180),// 当前垂直角度sin值\r\n          configPitchCos = Math.cos(pitch * Math.PI / 180),// 当前垂直角度cos值\r\n          yawCos = Math.cos((-HsYaw + yaw) * Math.PI / 180);// （当前水平角度-热点水平角度）角度差的cos值\r\n      let z = hsPitchSin * configPitchSin + hsPitchCos * yawCos * configPitchCos;\r\n      if ((HsYaw <= 90 && HsYaw > -90 && z <= 0) || ((HsYaw > 90 || HsYaw <= -90) && z <= 0)) {\r\n        // 不在屏幕内\r\n        hsDiv.style.visibility = 'hidden';\r\n      } else {\r\n        let yawSin = Math.sin((-HsYaw + yaw) * Math.PI / 180),\r\n            hfovTan = Math.tan(hfov * Math.PI / 360);\r\n        hsDiv.style.visibility = 'visible';\r\n        let canvas = this.renderer.getCanvas(), canvasWidth = canvas.clientWidth, canvasHeight = canvas.clientHeight;\r\n        let coord = [-canvasWidth / hfovTan * yawSin * hsPitchCos / z / 2, -canvasWidth / hfovTan * (hsPitchSin * configPitchCos - hsPitchCos * yawCos * configPitchSin) / z / 2];\r\n        // 应用滚动\r\n        let rollSin = Math.sin(0), rollCos = Math.cos(0);\r\n        coord = [coord[0] * rollCos - coord[1] * rollSin, coord[0] * rollSin + coord[1] * rollCos];\r\n        // 应用变换\r\n        coord[0] += (canvasWidth - hsDiv.offsetWidth) / 2;\r\n        coord[1] += (canvasHeight - hsDiv.offsetHeight) / 2;\r\n        let transform = 'translate(' + coord[0] + 'px, ' + coord[1] + 'px) translateZ(9999px)';\r\n        hsDiv.style.webkitTransform = transform;\r\n        hsDiv.style.MozTransform = transform;\r\n        hsDiv.style.transform = transform;\r\n      }\r\n    },\r\n    // 标签事件添加\r\n    domEventAdd(){\r\n      const {container, uiControls, dragControl} = this.$refs;\r\n      // 鼠标滚轮事件---缩放视野，兼容火狐·DOMMouseScroll·\r\n      uiControls.addEventListener('mousewheel', this.onDocumentMouseWheel, false);// 第三个参数：false由内而外冒泡，true则由外而内\r\n      uiControls.addEventListener('DOMMouseScroll', this.onDocumentMouseWheel, false);\r\n      // 鼠标or手指拖动事件---垂直和水平转动，兼容pc和移动端\r\n      dragControl.addEventListener('mousedown', this.onDocumentMouseDown, false);// (PC端)鼠标按下\r\n      dragControl.addEventListener('mousemove', this.onDocumentMouseMove, false);// (PC端)鼠标移动\r\n      dragControl.addEventListener('mouseup', this.onDocumentMouseUp, false);// (PC端)鼠标抬起\r\n      dragControl.addEventListener('mouseleave', this.onDocumentMouseUp, false);// (PC端)鼠标离开\r\n      dragControl.addEventListener('touchstart', this.onDocumentTouchStart, false);// (移动端)触摸开始\r\n      dragControl.addEventListener('touchmove', this.onDocumentTouchMove, false);// (移动端)触摸移动\r\n      dragControl.addEventListener('touchend', this.onDocumentTouchEnd, false);// (移动端)触摸结束\r\n      // 双击聚焦or还原\r\n      dragControl.addEventListener('dblclick', this.onDocumentDoubleClick, false);\r\n      // 全屏事件（各浏览器）\r\n      container.addEventListener('mozfullscreenchange', this.onDocumentResize, false);\r\n      container.addEventListener('webkitfullscreenchange', this.onDocumentResize, false);\r\n      container.addEventListener('msfullscreenchange', this.onDocumentResize, false);\r\n      container.addEventListener('fullscreenchange', this.onDocumentResize, false);\r\n      // 窗口大小监控\r\n      // if (typeof ResizeObserver === 'function') {\r\n      //   const resizeObserver = new ResizeObserver(this.onDocumentResize);\r\n      //   resizeObserver.observe(container);\r\n      //   this.resizeObserver = resizeObserver;\r\n      // } else {\r\n      // }\r\n      window.addEventListener('resize', this.onDocumentResize, false);\r\n      window.addEventListener('orientationchange', this.onDocumentResize, false);\r\n    },\r\n    // 【鼠标滚轮】事件处理\r\n    onDocumentMouseWheel(event) {\r\n      if (!this.renderer) {\r\n        return;\r\n      }\r\n      event.preventDefault();// 阻止标签默认事件（选中该元素）\r\n      const { pitch, yaw, hfov } = this.config;\r\n      if (event.wheelDeltaY) {\r\n        // WebKit浏览器\r\n        this.config.hfov = this.calcHfov(hfov - event.wheelDeltaY * 0.05);\r\n        // speed.hfov = event.wheelDelta < 0 ? 1 : -1;\r\n      } else if (event.wheelDelta) {\r\n        // Opera / Explorer 9浏览器\r\n        this.config.hfov = this.calcHfov(hfov - event.wheelDelta * 0.05);\r\n        // speed.hfov = event.wheelDelta < 0 ? 1 : -1;\r\n      } else if (event.detail) {\r\n        // Firefox浏览器\r\n        this.config.hfov = this.calcHfov(hfov + event.detail * 1.5);\r\n        // speed.hfov = event.detail > 0 ? 1 : -1;\r\n      }\r\n      this.animate();// 手动渲染\r\n    },\r\n    // 计算水平视野变化\r\n    calcHfov(hfov){\r\n      const {minHfov, maxHfov} = this.defaultConfig;\r\n      return hfov < minHfov ? minHfov : (hfov > maxHfov? maxHfov: hfov);\r\n    },\r\n    //【鼠标按下】事件处理(PC端)\r\n    onDocumentMouseDown(event) {\r\n      // 鼠标抓取样式\r\n      const {container, uiControls} = this.$refs;\r\n      uiControls.style.cursor = 'move';\r\n      event.preventDefault();// 阻止标签默认事件（选中元素）\r\n      container.focus();// 选中【container】\r\n      if (!this.renderer) {\r\n        return;\r\n      }\r\n      // 计算鼠标点击相对【container】位置[x, y]\r\n      let [x, y] = this.calcMousePosition(event);\r\n      // 计算鼠标位置全景图俯仰和偏航[pitch, yaw]\r\n      // let coords = mouseEventToCoords(event);\r\n      const { pitch, yaw } = this.config;\r\n      this.pointer.isUserDown = true;// 是否用户点下\r\n      this.pointer.onPointerDownPointerX = x;// 鼠标点击x\r\n      this.pointer.onPointerDownPointerY = y;// 鼠标点击y\r\n      this.pointer.onPointerDownYaw = yaw;// 鼠标点击时yaw\r\n      this.pointer.onPointerDownPitch = pitch;// 鼠标点击时pitch\r\n      this.animate();// 手动渲染\r\n    },\r\n    //【鼠标移动】事件处理(PC端)\r\n    onDocumentMouseMove(event) {\r\n      if (!this.renderer || !this.pointer.isUserDown) {\r\n        return;\r\n      }\r\n      const canvas = this.renderer.getCanvas();\r\n      let canvasWidth = canvas.clientWidth,canvasHeight = canvas.clientHeight;\r\n      const [x, y] = this.calcMousePosition(event);\r\n      const { onPointerDownPointerX, onPointerDownPointerY, onPointerDownYaw, onPointerDownPitch } = this.pointer;\r\n      const { hfov } = this.config;\r\n      this.config.yaw = ((Math.atan(onPointerDownPointerX / canvasWidth * 2 - 1) - Math.atan(x / canvasWidth * 2 - 1)) * 180 / Math.PI * hfov / 90) + onPointerDownYaw;\r\n      let newVfov = 2 * Math.atan(Math.tan(hfov/360*Math.PI) * canvasHeight / canvasWidth) * 180 / Math.PI;\r\n      this.config.pitch = ((Math.atan(y / canvasHeight * 2 - 1) - Math.atan(onPointerDownPointerY / canvasHeight * 2 - 1)) * 180 / Math.PI * newVfov / 90) + onPointerDownPitch;\r\n    },\r\n    //【鼠标抬起】事件处理(PC端)\r\n    onDocumentMouseUp(event) {\r\n      const {uiControls} = this.$refs;\r\n      uiControls.style.cursor = 'default';\r\n      this.pointer.isUserDown = false;// 是否用户点下\r\n    },\r\n    //【触摸开始】事件处理(移动端)\r\n    onDocumentTouchStart(event) {\r\n      if (!this.renderer) {\r\n        return;\r\n      }\r\n      // 计算鼠标点击相对【container】位置[x, y]\r\n      let [x1, y1] = this.calcMousePosition(event.targetTouches[0]);\r\n      let onPointerDownPointerX = x1;\r\n      let onPointerDownPointerY = y1;\r\n      if (event.targetTouches.length == 2) {\r\n        // 向下指针是两个手指的中心\r\n        let [x2, y2] = this.calcMousePosition(event.targetTouches[1]);\r\n        onPointerDownPointerX += (x2 - x1) * 0.5;\r\n        onPointerDownPointerY += (y2 - y1) * 0.5;\r\n        this.pointer.onPointerDownPointerDist = Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\r\n      }\r\n      const { pitch, yaw } = this.config;\r\n      this.pointer.isUserDown = true;// 是否用户点下\r\n      this.pointer.onPointerDownPointerX = onPointerDownPointerX;// 鼠标点击x\r\n      this.pointer.onPointerDownPointerY = onPointerDownPointerY;// 鼠标点击y\r\n      this.pointer.onPointerDownYaw = yaw;// 鼠标点击时yaw\r\n      this.pointer.onPointerDownPitch = pitch;// 鼠标点击时pitch\r\n      this.animate();// 手动渲染\r\n    },\r\n    //【触摸移动】事件处理(移动端)\r\n    onDocumentTouchMove(event) {\r\n      if (!this.renderer || !this.pointer.isUserDown) {\r\n        return;\r\n      }\r\n      const { hfov } = this.config;\r\n      const { onPointerDownPointerX, onPointerDownPointerY, onPointerDownYaw, onPointerDownPitch, onPointerDownPointerDist } = this.pointer;\r\n      let [x1, y1] = this.calcMousePosition(event.targetTouches[0]);\r\n      let clientX = x1;\r\n      let clientY = y1;\r\n      if (event.targetTouches.length == 2 && onPointerDownPointerDist != -1) {\r\n        let [x2, y2] = calcMousePosition(event.targetTouches[1]);\r\n        clientX += (x2 - x1) * 0.5;\r\n        clientY += (y2 - y1) * 0.5;\r\n        let clientDist = Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\r\n        // 修改视角（移动端双指缩放）\r\n        this.config.hfov = this.calcHfov(hfov + (onPointerDownPointerDist - clientDist) * 0.1);\r\n        this.pointer.onPointerDownPointerDist = clientDist;\r\n      }\r\n      this.config.yaw = (onPointerDownPointerX - clientX) * (hfov / 360) * 2 + onPointerDownYaw;\r\n      this.config.pitch = (clientY - onPointerDownPointerY) * (hfov / 360) * 2 + onPointerDownPitch;\r\n    },\r\n    //【触摸结束】事件处理(移动端)\r\n    onDocumentTouchEnd() {\r\n      this.pointer.onPointerDownPointerDist = -1;\r\n      this.pointer.isUserDown = false;// 是否用户点下\r\n    },\r\n    // 计算点击、触摸位置[x,y]\r\n    calcMousePosition(event) {\r\n      const { container } = this.$refs;\r\n      let bounds = container.getBoundingClientRect();// 获取元素上下左右距离浏览器窗口距离，以及自己的宽高{top,lef,right,bottom,width,height}\r\n      // iOS是 pageX / pageY\r\n      let x = (event.clientX || event.pageX) - bounds.left;\r\n      let y = (event.clientY || event.pageY) - bounds.top;\r\n      return [x,y];\r\n    },\r\n    // 双击聚焦or还原\r\n    onDocumentDoubleClick(event) {\r\n      if (!this.renderer) {\r\n        return;\r\n      }\r\n      const { minHfov,origHfov } = this.defaultConfig;\r\n      const { hfov } = this.config;\r\n      if (minHfov === hfov) {\r\n        this.config.hfov = origHfov;\r\n      } else {\r\n        let [pitchPointer, yawPointer] = this.mouseEventToCoords(event);\r\n        this.config.pitch = pitchPointer;\r\n        this.config.yaw = yawPointer;\r\n        this.config.hfov = minHfov;\r\n      }\r\n      this.render();// 手动渲染\r\n    },\r\n    // 计算鼠标位置垂直俯仰角度、水平转动角度[pitch, yaw]\r\n    mouseEventToCoords(event) {\r\n      let [x,y] = this.calcMousePosition(event);// 获取鼠标相对【container】位置【x,y】\r\n      let canvas = this.renderer.getCanvas();\r\n      let canvasWidth = canvas.clientWidth, canvasHeight = canvas.clientHeight;\r\n      x = x / canvasWidth * 2 - 1;\r\n      y = (1 - y / canvasHeight * 2) * canvasHeight / canvasWidth;\r\n      let { pitch, yaw, hfov } = this.config;\r\n      let focal = 1 / Math.tan(hfov * Math.PI / 360);\r\n      let s = Math.sin(pitch * Math.PI / 180);\r\n      let c = Math.cos(pitch * Math.PI / 180);\r\n      let a = focal * c - y * s;\r\n      let root = Math.sqrt(x*x + a*a);\r\n      pitch = Math.atan((y * c + focal * s) / root) * 180 / Math.PI;\r\n      yaw = Math.atan2(x / root, a / root) * 180 / Math.PI + yaw;\r\n      if (yaw < -180){\r\n        yaw += 360;\r\n      }\r\n      if (yaw > 180){\r\n        yaw -= 360;\r\n      }\r\n      return [pitch, yaw];\r\n    },\r\n    // 【全屏】【窗口改变】事件处理(PC端)\r\n    onDocumentResize() {\r\n      if(this.renderer){\r\n        this.renderer.resize();\r\n      }\r\n    },\r\n    // 【全屏】判断当前是否全屏状态\r\n    isFullscreenActive(){\r\n      if (document.fullscreenElement || document.fullscreen || document.mozFullScreen || document.webkitIsFullScreen || document.msFullscreenElement) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n    /**\r\n     * 操作按钮：全屏、放大、缩小\r\n     */\r\n    // 全屏\r\n    toggleFullscreen() {\r\n      try {\r\n        if (this.renderer) {\r\n          if (!this.isFullscreenActive()) {\r\n            const {container} = this.$refs;\r\n            // 全屏\r\n            if (container.requestFullscreen) {\r\n              container.requestFullscreen();\r\n            } else if (container.mozRequestFullScreen) {\r\n              container.mozRequestFullScreen();\r\n            } else if (container.msRequestFullscreen) {\r\n              container.msRequestFullscreen();\r\n            } else {\r\n              container.webkitRequestFullScreen();\r\n            }\r\n          } else {\r\n            // 取消全屏\r\n            if (document.exitFullscreen) {\r\n              document.exitFullscreen();\r\n            } else if (document.mozCancelFullScreen) {\r\n              document.mozCancelFullScreen();\r\n            } else if (document.webkitCancelFullScreen) {\r\n              document.webkitCancelFullScreen();\r\n            } else if (document.msExitFullscreen) {\r\n              document.msExitFullscreen();\r\n            }\r\n          }\r\n        }\r\n      } catch(event) {\r\n        console.error(\"全屏问题：\", event);\r\n      }\r\n    },\r\n    // 热点\r\n    hotspotDown(event, hs){\r\n      this.moveHotspotId = hs.id;\r\n    },\r\n    hotspotMove(event, hs){\r\n      if(this.moveHotspotId == hs.id){\r\n        let coords = this.mouseEventToCoords(event);\r\n        hs.pitch = coords[0];\r\n        hs.yaw = coords[1];\r\n        this.renderHotSpot(hs);\r\n      }\r\n    },\r\n    hotspotUp(event, hs){\r\n      this.moveHotspotId = null;\r\n    },\r\n  },\r\n  destroyed() {\r\n    try{\r\n        if(this.renderer){\r\n          this.renderer.destroy();\r\n        }\r\n        const {container, uiControls, dragControl} = this.$refs;\r\n        // 鼠标滚轮事件---缩放视野，兼容火狐·DOMMouseScroll·\r\n        uiControls.removeEventListener('mousewheel', this.onDocumentMouseWheel, false);// 第三个参数：false由内而外冒泡，true则由外而内\r\n        uiControls.removeEventListener('DOMMouseScroll', this.onDocumentMouseWheel, false);\r\n        // 鼠标or手指拖动事件---垂直和水平转动，兼容pc和移动端\r\n        dragControl.removeEventListener('mousedown', this.onDocumentMouseDown, false);// (PC端)鼠标按下\r\n        dragControl.removeEventListener('mousemove', this.onDocumentMouseMove, false);// (PC端)鼠标移动\r\n        dragControl.removeEventListener('mouseup', this.onDocumentMouseUp, false);// (PC端)鼠标抬起\r\n        dragControl.removeEventListener('mouseleave', this.onDocumentMouseUp, false);// (PC端)鼠标离开\r\n        dragControl.removeEventListener('touchstart', this.onDocumentTouchStart, false);// (移动端)触摸开始\r\n        dragControl.removeEventListener('touchmove', this.onDocumentTouchMove, false);// (移动端)触摸移动\r\n        dragControl.removeEventListener('touchend', this.onDocumentTouchEnd, false);// (移动端)触摸结束\r\n      // 双击聚焦or还原\r\n        dragControl.removeEventListener('dblclick', this.onDocumentDoubleClick, false);\r\n        // 全屏事件（各浏览器）\r\n        container.removeEventListener('mozfullscreenchange', this.onDocumentResize, false);\r\n        container.removeEventListener('webkitfullscreenchange', this.onDocumentResize, false);\r\n        container.removeEventListener('msfullscreenchange', this.onDocumentResize, false);\r\n        container.removeEventListener('fullscreenchange', this.onDocumentResize, false);\r\n        // 窗口大小监控\r\n        // if (typeof ResizeObserver === 'function') {\r\n        //   this.resizeObserver.disconnect();\r\n        // } else {\r\n         \r\n        // }\r\n        window.removeEventListener('resize', this.onDocumentResize, false);\r\n        window.removeEventListener('orientationchange', this.onDocumentResize, false);\r\n    }catch (e) {\r\n    }\r\n  },\r\n  mounted() {\r\n    // this.loadImage();\r\n    this.domEventAdd();\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.home {\r\n  height: 100%;\r\n  width: 100%;\r\n  .pnlm-container {\r\n    width: 100%;\r\n    height: 100%;\r\n    margin: 0;\r\n    padding: 0;\r\n    position: relative;\r\n    overflow: hidden;\r\n    font-family: Helvetica, \"Nimbus Sans L\", \"Liberation Sans\", Arial, sans-serif;\r\n    cursor: default;\r\n    -webkit-user-select: none;\r\n    -khtml-user-select: none;\r\n    -moz-user-select: none;\r\n    -o-user-select: none;\r\n    -ms-user-select: none;\r\n    user-select: none;\r\n    outline: 0;\r\n    contain: content;\r\n    direction: ltr;\r\n  }\r\n  .pnlm-container * {\r\n    box-sizing: content-box;\r\n  }\r\n  .pnlm-container:-moz-full-screen {\r\n    height: 100% !important;\r\n    width: 100% !important;\r\n    position: static !important;\r\n  }\r\n  .pnlm-container:-webkit-full-screen {\r\n    height: 100% !important;\r\n    width: 100% !important;\r\n    position: static !important;\r\n  }\r\n  .pnlm-container:-ms-fullscreen {\r\n    height: 100% !important;\r\n    width: 100% !important;\r\n    position: static !important;\r\n  }\r\n  .pnlm-container:fullscreen {\r\n    height: 100% !important;\r\n    width: 100% !important;\r\n    position: static !important;\r\n  }\r\n  .pnlm-ui {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    z-index: 2;\r\n  }\r\n  .pnlm-dragfix {\r\n    position: absolute;\r\n    height: 100%;\r\n    width: 100%;\r\n  }\r\n  .pnlm-compass {\r\n    position: absolute;\r\n    width: 50px;\r\n    height: 50px;\r\n    right: 4px;\r\n    bottom: 4px;\r\n    border-radius: 50%;\r\n    background-color: #fff;\r\n    border: 1px solid #999;\r\n    background-image: url('./img/compass.svg');\r\n    cursor: default;\r\n    -webkit-transform: translateZ(9999px);\r\n    transform: translateZ(9999px);\r\n  }\r\n  .hotspot-base {\r\n    position: absolute;\r\n    visibility: hidden;\r\n    top: 0;\r\n  }\r\n  .tooltip-container {\r\n    position: relative;\r\n    display: inline-block;\r\n    .tooltip {\r\n      position: relative;\r\n      display: inline-block;\r\n      cursor: pointer;\r\n      img{\r\n        width: 30px;\r\n        height: 30px;\r\n      }\r\n    }\r\n    .tooltip-text {\r\n      white-space:nowrap;\r\n      background-color: #333;\r\n      color: #fff;\r\n      text-align: center;\r\n      border-radius: 10px;\r\n      padding: 2px 5px;\r\n      position: absolute;\r\n      z-index: 1;\r\n      top: -40px;\r\n      left: 50%;\r\n      transform: translateX(-50%);\r\n      opacity: 1;\r\n      transition: opacity 0.3s;\r\n    }\r\n    .tooltip-text::after {\r\n      content: \"\";\r\n      position: absolute;\r\n      border-width: 8px;\r\n      border-style: solid;\r\n      border-color: #333 transparent transparent transparent;\r\n      top: 100%;\r\n      left: 50%;\r\n      transform: translateX(-50%);\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Viewer.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Viewer.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Viewer.vue?vue&type=template&id=48c512e8&scoped=true\"\nimport script from \"./Viewer.vue?vue&type=script&lang=js\"\nexport * from \"./Viewer.vue?vue&type=script&lang=js\"\nimport style0 from \"./Viewer.vue?vue&type=style&index=0&id=48c512e8&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"48c512e8\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","ref","attrs","_l","getHotSpots","item","id","refInFor","on","$event","hotspotDown","hotspotUp","hotspotMove","require","_v","_s","text","staticRenderFns","v","join","fragEquiCubeBase","fragCube","fragEquirectangular","PanoramaRenderer","container","canvas","program","gl","vs","fs","previewProgram","previewVs","previewFs","vtmps","pose","image","imageType","texCoordBuffer","cubeVertBuf","cubeVertTexCoordBuf","cubeVertIndBuf","globalParams","createCube","Float32Array","handleWebGLError1286","console","log","width","Math","round","height","document","createElement","style","appendChild","init","_image","_imageType","callback","params","s","haov","PI","vaov","voffset","undefined","type","detachShader","deleteShader","bindBuffer","ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","texture","deleteTexture","deleteProgram","cubeImgWidth","faceMissing","fillMissingFaces","imgSize","nbytes","imageArray","Uint8ClampedArray","rgb","backgroundColor","i","backgroundSquare","ImageData","navigator","userAgent","toLowerCase","match","getContext","alpha","depth","getError","basePath","fullpath","path","invTileResolution","tileResolution","vertices","slice","maxWidth","getParameter","MAX_TEXTURE_SIZE","max","MAX_CUBE_MAP_TEXTURE_SIZE","horizonPitchRadian","isNaN","Number","horizonRollRadian","glBindType","TEXTURE_2D","viewport","drawingBufferWidth","drawingBufferHeight","getShaderPrecisionFormat","precision","FRAGMENT_SHADER","HIGH_FLOAT","replace","createShader","VERTEX_SHADER","vertexSrc","shaderSource","compileShader","fragmentSrc","TEXTURE_CUBE_MAP","createProgram","attachShader","linkProgram","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","getProgramParameter","LINK_STATUS","getProgramInfoLog","useProgram","drawInProgress","color","clearColor","clear","COLOR_BUFFER_BIT","texCoordLocation","getAttribLocation","enableVertexAttribArray","createBuffer","bufferData","STATIC_DRAW","vertexAttribPointer","FLOAT","aspectRatio","getUniformLocation","uniform1f","psi","theta","f","h","vo","rot","uniform4fv","concat","createTexture","bindTexture","texImage2D","TEXTURE_CUBE_MAP_POSITIVE_X","RGB","UNSIGNED_BYTE","TEXTURE_CUBE_MAP_NEGATIVE_X","TEXTURE_CUBE_MAP_POSITIVE_Y","TEXTURE_CUBE_MAP_NEGATIVE_Y","TEXTURE_CUBE_MAP_POSITIVE_Z","TEXTURE_CUBE_MAP_NEGATIVE_Z","uniform1i","cropCanvas","cropContext","drawImage","cropImage","getImageData","texture2","activeTexture","TEXTURE1","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","TEXTURE0","REPEAT","err","destroy","contains","removeChild","extension","getExtension","loseContext","resize","pixelRatio","window","devicePixelRatio","clientWidth","clientHeight","shtHash","setPose","getPose","pitch","yaw","hfov","focal","roll","orig_pitch","orig_yaw","x","cos","sin","y","z","asin","min","atan2","w","roll_adj","acos","sqrt","hook","vfov","atan","tan","drawArrays","TRIANGLES","returnImage","createImageBitmap","toString","indexOf","toDataURL","getCanvas","name","props","autoRotate","Boolean","required","hotSpots","Array","default","computed","watch","immediate","handler","newVal","oldVal","config","animate","$nextTick","renderHotSpots","data","panoImage","renderer","animating","defaultConfig","minHfov","maxHfov","origPitch","origYaw","origHfov","pointer","isUserDown","onPointerDownPointerX","onPointerDownPointerY","onPointerDownYaw","onPointerDownPitch","onPointerDownPointerDist","resizeObserver","moveHotspotId","methods","loadImage","imgUrl","_this","Image","crossOrigin","onload","onerror","src","getElementById","requestAnimationFrame","compass","$refs","transform","webkitTransform","forEach","renderHotSpot","hs","HsPitch","HsYaw","hsDiv","hsPitchSin","hsPitchCos","configPitchSin","configPitchCos","yawCos","visibility","yawSin","hfovTan","canvasWidth","canvasHeight","coord","rollSin","rollCos","offsetWidth","offsetHeight","MozTransform","domEventAdd","uiControls","dragControl","addEventListener","onDocumentMouseWheel","onDocumentMouseDown","onDocumentMouseMove","onDocumentMouseUp","onDocumentTouchStart","onDocumentTouchMove","onDocumentTouchEnd","onDocumentDoubleClick","onDocumentResize","event","preventDefault","wheelDeltaY","calcHfov","wheelDelta","detail","cursor","focus","calcMousePosition","newVfov","x1","y1","targetTouches","length","x2","y2","clientX","clientY","clientDist","bounds","getBoundingClientRect","pageX","left","pageY","top","pitchPointer","yawPointer","mouseEventToCoords","c","a","root","isFullscreenActive","fullscreenElement","fullscreen","mozFullScreen","webkitIsFullScreen","msFullscreenElement","toggleFullscreen","exitFullscreen","mozCancelFullScreen","webkitCancelFullScreen","msExitFullscreen","requestFullscreen","mozRequestFullScreen","msRequestFullscreen","webkitRequestFullScreen","error","coords","destroyed","removeEventListener","e","mounted","component"],"sourceRoot":""}