"use strict";(self["webpackChunkjqh_code"]=self["webpackChunkjqh_code"]||[]).push([[51],{4494:function(t,e,i){i.r(e),i.d(e,{default:function(){return h}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pannellum-content"},[e("h1",[t._v("pannellum全景图编辑器")]),e("div",{staticStyle:{flex:"1"}},[e("PannellumEditPage")],1)])},s=[],n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("div",{staticClass:"content"},[e("div",{staticClass:"image-select"},[e("div",{staticClass:"img-list"},t._l(t.imageUrlList,(function(i){return e("div",{staticClass:"img-item",class:{active:t.currentImgId==i.id},on:{click:function(e){return t.imgClick(i.id,i.imageURL)}}},[e("img",{staticClass:"img",attrs:{src:i.imageURL}}),e("div",{staticClass:"upload-name"},[t._v(t._s(i.name))])])})),0),e("div",{staticClass:"upload",on:{click:function(e){return t.$refs.fileUpload.click()}}},[e("img",{staticClass:"upload-img",attrs:{src:i(5388)}}),e("div",{staticClass:"upload-name"},[t._v("上传图片")]),e("input",{ref:"fileUpload",staticStyle:{display:"none"},attrs:{accept:"image/*",type:"file"},on:{change:function(e){return t.uploadFileChange()}}})])]),e("div",{staticClass:"center"},[e("div",{staticClass:"img-preview"},[e("Viewer",{ref:"viewImage",attrs:{hotSpots:t.currentHotSpots,autoRotate:t.defaultConfig.autoRotate}})],1)]),e("div",{staticClass:"right-attribute"},[e("el-form",{attrs:{"label-position":"top","label-width":"80px",model:t.defaultConfig}},[e("el-form-item",[e("el-switch",{attrs:{disabled:!t.currentImgId,"active-text":"自动旋转"},model:{value:t.defaultConfig.autoRotate,callback:function(e){t.$set(t.defaultConfig,"autoRotate",e)},expression:"defaultConfig.autoRotate"}})],1)],1),e("el-button",{attrs:{disabled:!t.currentImgId,size:"mini",round:""},on:{click:function(e){return t.addHotSpot(t.currentImgId)}}},[t._v("添加热点")]),t._l(t.currentHotSpots,(function(i){return e("div",[e("el-input",{attrs:{placeholder:"请输入内容"},model:{value:i.text,callback:function(e){t.$set(i,"text",e)},expression:"item.text"}})],1)}))],2)])])},o=[],l=(i(4114),i(1793)),r={name:"EditPage",components:{Viewer:l.A},data(){return{funTabActive:"global",currentImgId:null,imageUrlList:[],defaultConfig:{pitch:0,yaw:0,hfov:100,autoRotate:!1},hotSpots:{},currentHotSpots:[]}},methods:{funTabToggle(t){this.funTabActive=t},uploadFileChange(){let t=this;const e=this.$refs.fileUpload;let i=e.files[0];if(e.value="",i){const e=new FileReader;e.onload=function(){const a=e.result;let s={id:t.generateUUID(),imageURL:a,name:i.name};t.imageUrlList.push(s),t.imgClick(s.id,s.imageURL)},e.readAsDataURL(i)}},generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const e=16*Math.random()|0,i="x"===t?e:3&e|8;return i.toString(16)}))},imgClick(t,e){this.currentImgId=t,this.$refs.viewImage.loadImage(e),this.currentHotSpots=this.hotSpots[t]?this.hotSpots[t]:[]},addHotSpot(t){const{pitch:e,yaw:i}=this.$refs.viewImage.config;this.hotSpots[t]||(this.hotSpots[t]=[]),this.hotSpots[t].push({id:this.generateUUID(),pitch:e,yaw:i,text:"我是热点"}),this.currentHotSpots=this.hotSpots[t],console.log(this.currentHotSpots)}}},c=r,u=i(1656),d=(0,u.A)(c,n,o,!1,null,"5bf511e0",null),g=d.exports,m={name:"pannellum",components:{PannellumEditPage:g},data(){return{}},methods:{}},p=m,f=(0,u.A)(p,a,s,!1,null,"78bb59e6",null),h=f.exports},5388:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwAQMAAABtzGvEAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAADpJREFUGNNjYMAD+P////8BFwWUx0d9/oCgbNCoDwiK+f8BnBSqSjSKgVgK5FwcFBggKDRP4PE8bgAAmwZrC6CKbWEAAAAASUVORK5CYII="}}]);
//# sourceMappingURL=51.2f7c9f7f.js.map